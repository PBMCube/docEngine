/**
* Modo UI 0.13
* ============
* (c) 2013 Christian Engel - wearekiss.com
* All rights reserved.
*
* If you are using the Modo library for non-commercial work,
* this Creative Commons license applies:
* http://creativecommons.org/licenses/by-nc-nd/3.0/
*
* Commercial licenses must be obtained directly from Kiss.
* Please contact us by mail at hello@wearekiss.com
*
* @dependencies: jQuery, underscore.js, backbone.js
* @version: 0.13
* @author: Christian Engel <hello@wearekiss.com>
*/
(function(b){function a(a,c){for(var f in a){if("undefined"!==typeof c[f])throw Error('Duplicated reference key "'+f+'"');c[f]=a[f]}}function n(a){return"undefined"===typeof a.noAdd}var c,l,m;c={};l=b.modo;c.VERSION="0.13";c.cssPrefix="mdo-";m={count:0,domRoot:null,getId:function(){this.count+=1;return c.cssPrefix+this.count}};c.init=function(a,b){var f;void 0===b?(f=$("body"),b=a):f=a instanceof $?a:$(a);f.addClass(c.cssPrefix+"root");m.domRoot=f;if(c.isElement(b))f.append(b.el);else throw Error("Root element no modo element");
c.trigger("init");return this};c.defineElement=function(a,b,f){if("undefined"!==typeof this[a])throw Error('Cannot define modo element "'+a+'". Its already defined');f.classNames=b;this[a]=f;return{inheritPrototype:function(){var a,e;e=[];for(a=0;a<arguments.length;a++)e.push(c[arguments[a]].prototype);_.extend.apply(window,[f.prototype].concat(e));return this},extendPrototype:function(a){_.extend(f.prototype,a);return this}}};c.noConflict=function(){b.modo=l};c.isElement=function(a){return"object"!==
typeof a?!1:void 0!==a.modoId&&void 0!==a.el};c.isGetSetElement=function(a){return this.isElement(a)?"function"===typeof a.get&&"function"===typeof a.set:!1};c.isDOM=function(a){return"undefined"===typeof a?!1:void 0!==a.nodeName||a instanceof $};c.getRootElement=function(){return m.domRoot?m.domRoot:$("body")};c.reset=function(){m.count=0;m.domRoot=null;c.cssPrefix="mdo-"};c.generate=function(e,b){var f=e,l=[],r={},d,h,k,m,g,q,s={silent:!0},t=!1;f instanceof Array||(f=[f],t=!0);for(m=0;m<f.length;m++)if(d=
f[m],c.isElement(d))l.push(d);else{if(d instanceof Object){h=!1;for(g in d)if(d.hasOwnProperty(g)){if(c.isElement(d[g])){l.push(d);h=!0;break}break}if(h)continue}if(void 0===c[d.type])throw Error('Unknown modo element "'+d.type+'"');k=new c[d.type](d.params);l.push(k);if(void 0!==d.ref){if(void 0!==r[d.ref])throw Error('Duplicated reference key "'+d.ref+'"');r[d.ref]=k}d.flexible&&k.setFlexible();if(d.on)for(g in d.on)if(d.on.hasOwnProperty(g))k.on(g,d.on[g]);if(d.once)for(g in d.once)if(d.once.hasOwnProperty(g))k.once(g,
d.once[g]);d.hidden&&k.hide();d.disabled&&"function"===typeof k.disable&&k.disable();if(d.children instanceof Array&&d.children.length){if("function"!==typeof k.add)throw Error('Element of type "'+d.type+"\" doesn't support the addition of children");h=c.generate(d.children,!0);if("function"===typeof k.getElements)for(g=0;g<d.children.length;g++)"undefined"===typeof h[0][g].noAdd&&("undefined"!==typeof d.children[g].key?(q={},q[d.children[g].key]=h[0][g],k.add.call(k,q,s)):k.add.call(k,h[0][g],s));
else h[0].push(s),k.add.apply(k,_.filter(h[0],n));a(h[1],r)}if(d.children instanceof Object&&!(d.children instanceof Array)){if("function"!==typeof k.add)throw Error('Element of type "'+d.type+"\" doesn't support the addition of children");if("function"!==typeof k.getElements)throw Error('Element of type "'+d.type+"\" doesn't support keyed children.");f=[];q=[];for(g in d.children)d.children.hasOwnProperty(g)&&(f.push(d.children[g]),q.push(g));h=c.generate(f,!0);for(g=0;g<q.length;g++)f={},f[q[g]]=
h[0][g],k.add.call(k,f,s);a(h[1],r)}}return b?[l,r]:t?k:r};c.Element=function(a){a=a||{};var b,f={className:a.className||"",dataAttributes:a.dataAttributes||{}};this.el=a.el||$("<div></div>");this.el.addClass(c.cssPrefix+c.Element.classNames[0]);this.modoId=m.getId();this.visible=!0;f.className&&this.el.addClass(f.className);this.el.attr("id",this.modoId);for(b in f.dataAttributes)f.hasOwnProperty(b)&&this.el.attr("data-"+b,f.dataAttributes[b])};c.Element.classNames=["element","flexible","disabled"];
_.extend(c.Element.prototype,Backbone.Events,{setFlexible:function(a){"undefined"===typeof a&&(a=!0);a?this.el.addClass(c.cssPrefix+c.Element.classNames[1]):this.el.removeClass(c.cssPrefix+c.Element.classNames[1]);return this},show:function(a){a=a||{};a=a.silent;if(this.visible)return this;this.el.show();this.visible=!0;a||this.trigger("show");return this},hide:function(a){a=a||{};a=a.silent;if(!this.visible)return this;this.el.hide();this.visible=!1;a||this.trigger("hide");return this},addClass:function(a){this.el.addClass(c.cssPrefix+
a);return this},removeClass:function(a){this.el.removeClass(c.cssPrefix+a);return this}});_.extend(c,Backbone.Events);"function"===typeof define&&define.amd&&define(function(){return c});b.modo=c})(this);
(function(){var b;"undefined"!==typeof modo?b=modo:"function"===typeof require&&(b=require("modo"));b.defineElement("Button",["button"],function(a){a=a||{};b.Element.call(this,_.extend(a,{el:$('<button title="'+(a.tooltip||"")+'">'+(a.label||"")+"</button>")}));this.addClass(modo.Button.classNames[0]);this.disabled=!1;var n=this;this.el.on("click",function(a){this.disabled||n.trigger("click",a)});a.disabled&&this.disable({silent:!0})}).inheritPrototype("Element").extendPrototype({enable:function(){this.removeClass(modo.Element.classNames[2]);
this.el.attr("disabled",!1);this.disabled=!1;this.trigger("enabled");return this},disable:function(){this.addClass(modo.Element.classNames[2]);this.el.attr("disabled",!0);this.disabled=!0;this.trigger("disabled");return this}});"undefined"!==typeof exports?exports=b.Button:"function"===typeof define&&define(function(){return b.Button})})();
(function(){var b;"undefined"!==typeof modo?b=modo:"function"===typeof require&&(b=require("modo"));b.defineElement("Container",["container","container-layout-"],function(a){a=a||{};b.Element.call(this,a);var n=["normal","inline","block"];a=a.layout||n[0];-1===_.indexOf(n,a)&&(a=n[0]);this.addClass(b.Container.classNames[0]);this.addClass(b.Container.classNames[1]+a)}).inheritPrototype("Element").extendPrototype({add:function(){var a,b,c=!1,l=[];for(b=0;b<arguments.length;b++)if(a=arguments[b],modo.isElement(a)){if(a.modoId===
this.modoId)throw Error("You can't add a container to itself");this.el.append(a.el);l.push(a)}else if(modo.isDOM(a))this.el.append(a),l.push(a);else{if("undefined"===typeof a)throw Error("Illegal object passed");c=a.silent}if(!c)for(b=0;b<l.length;b++)this.trigger("add",l[b]);return this},remove:function(){var a,b,c=[],l=!1;for(b=0;b<arguments.length;b++)a=arguments[b],modo.isElement(a)?($("#"+a.modoId,this.el).remove(),c.push(a)):modo.isDOM(a)?($(a,this.el).remove(),c.push(a)):l=a.silent;if(!l)for(b=
0;b<c.length;b++)this.trigger("remove",c[b]);return this}});b.Container.INLINE="inline";b.Container.NORMAL="normal";b.Container.BLOCK="block";"undefined"!==typeof module?module.exports=modo.Container:"function"===typeof define&&define(function(){return modo.Container})})();
(function(){var b;"undefined"!==typeof modo?b=modo:"function"===typeof require&&(b=require("modo"));b.defineElement("ToggleButton",["togglebutton","toggled"],function(a){a=a||{};modo.Button.call(this,a);this.addClass(modo.ToggleButton.classNames[0]);this.locked=this.toggled=!1;this.on("click",function(){this.locked||(this.get()?this.set(!1):this.set(!0))})}).inheritPrototype("Button").extendPrototype({set:function(a){"undefined"===typeof a&&(a=!this.toggled);(this.toggled=a?!0:!1)?(this.addClass(modo.ToggleButton.classNames[1]),
this.trigger("change",!0)):(this.removeClass(modo.ToggleButton.classNames[1]),this.trigger("change",!1));return this},get:function(){return this.toggled},lock:function(a){"undefined"===typeof a&&(a=!0);this.locked=a?!0:!1;return this}});"undefined"!==typeof exports?exports=modo.ToggleButton:"function"===typeof define&&define("ToggleButton",[],function(){return modo.ToggleButton})})();
(function(){var b;"undefined"!==typeof modo?b=modo:"function"===typeof require&&(b=require("modo"));b.defineElement("ToggleGroup",["togglegroup"],function(a){function b(){if(!this.toggled){for(var a in e.elements)e.elements[a].modoId===this.modoId&&(p=a),e.elements[a].toggled&&e.elements[a].set(!1);this.set(!0);e.trigger("change",p)}}function c(){a.elements={};e.el.html("");var b,c,l={};for(b in a.collection.models)c=a.collection.models[b],l[c.id||c.cid]=c.get(a.pluck);e.add(l);p&&e.set(p,{silent:!0})}
a=a||{};a.layout=modo.Container.INLINE;modo.Container.call(this,a);this.removeClass(modo.Container.classNames[0]).addClass(modo.ToggleGroup.classNames[0]);this.elements={};var l=modo.ToggleGroup.prototype.add,m=modo.ToggleGroup.prototype.remove,e=this,p;this.add=function(a,c){var e,d;c=c||{};d=c.silent;for(var h in a)if(e=a[h],modo.isElement(e)){if(!e instanceof modo.ToggleButton)throw Error("Only Modo elements of type ToggleButton can be added to a ToggleGroup.");e.lock();this.elements[h]=e;e.on("click",
b);l.call(this,e,c);"undefined"===typeof p&&this.set(h);d||this.trigger("add",e)}else{if("string"!==typeof a[h])throw Error("Please pass key/value pairs with string values to this element.");this.elements[h]=new modo.ToggleButton({label:a[h]});this.elements[h].lock();this.elements[h].on("click",b);"undefined"===typeof p&&this.set(h);l.call(this,this.elements[h],c);d||this.trigger("add",this.elements[h])}};this.remove=function(a,c){c=c||{};"string"===typeof a?"undefined"!==typeof this.elements[a]&&
(m.call(this,this.elements[a],c),this.elements[a].off("click",b),delete this.elements[a],c.silent||this.trigger("remove",a)):m.call(this,a,c)};this.set=function(a,b){var c;b=b||{};c=b.silent;if("undefined"===typeof this.elements[a])throw Error("Object not in this group");if(this.elements[a].get())return this;for(var d in this.elements)this.elements[d].set(d===a);p=a;c||this.trigger("change",a);return this};this.get=function(){return p};this.getElements=function(){return this.elements};void 0!==a.elements&&
this.add(a.elements);void 0!==a.selectedItem&&this.set(a.selectedItem);void 0!==a.collection&&(c(),a.collection.on(a.updateOn?a.updateOn.join(" "):"add change remove sort",function(){c()}))}).inheritPrototype("Container");"undefined"!==typeof exports?exports=b.ToggleGroup:"function"===typeof define&&define(function(){return b.ToggleGroup})})();
(function(){var b;"undefined"!==typeof modo?b=modo:"function"===typeof require&&(b=require("modo"));b.defineElement("ViewStack",["viewstack"],function(a){a=a||{};b.Container.call(this,a);var n,c;this.addClass(b.ViewStack.classNames[0]);n=b.ViewStack.prototype.add;c=b.ViewStack.prototype.remove;this.elements={};this.displaying=this.count=0;this.switchMethod=a.switchMethod;this.add=function(a,c){var e,p;if(b.isElement(a)||b.isDOM(a))throw Error("Do not pass modoCore.* or DOM elements here, directly");
c=c||{};p=c.silent;for(e in a){this.elements[e]=a[e];this.count++;1===this.count?(a[e].show(),this.displaying=e,this.trigger("display",e)):a[e].hide();n.call(this,a[e],{silent:!0});var f={};f[e]=a[e];p||this.trigger("add",f)}};this.remove=function(a,b){var e,n,f;b=b||{};f=b.silent;if("undefined"===typeof this.elements[a])throw Error("Object not part of this Container");c.call(this,this.elements[a],{silent:!0});e={};e[a]=this.elements[a];delete this.elements[a];this.count--;f||this.trigger("remove",
e);if(this.displaying===a&&(this.displaying=null,this.count))for(n in e.elements){this.display(n);break}};this.getElements=function(){return this.elements}}).inheritPrototype("Container").extendPrototype({set:function(a){var b,c;if("undefined"===typeof this.elements[a])throw Error("Object not part of this Container");b=this.getElementByKey(a);this.displaying&&(c=this.getElementByKey(this.displaying));"function"===typeof this.switchMethod?this.switchMethod(c,b):(c&&c.hide(),b.show());this.displaying=
a;this.trigger("display",a)},get:function(){return this.displaying},getElementByKey:function(a){if(void 0===this.elements[a])throw Error("Element does not exist");return this.elements[a]}});"undefined"!==typeof exports?exports=b.ViewStack:"function"===typeof define&&define("ViewStack",[],function(){return b.ViewStack})})();
